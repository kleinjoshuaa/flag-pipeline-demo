template:
  name: DeleteFlagDefinition
  type: Step
  spec:
    type: Http
    spec:
      url: https://api.split.io/internal/api/v2/splits/ws/<+spec.inputVariables.workspace>/<+spec.inputVariables.flagName>/environments/<+spec.inputVariables.environment>
      method: DELETE
      headers:
        - key: Content-Type
          value: application/json
        - key: Authorization
          value: Bearer <+secrets.getValue("splitApiKey")>
      inputVariables:
        - name: workspace
          value: <+pipeline.variables.Workspace>
          type: String
        - name: flagName
          value: <+pipeline.variables.flagName>
          type: String
        - name: environment
          value: <+pipeline.variables.Environment>
          type: String
      outputVariables: []
      assertion: <+httpResponseCode>==200
    timeout: 10s
  identifier: DeleteFlagDefinition
  versionLabel: Version1
